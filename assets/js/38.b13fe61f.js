(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{469:function(v,t,_){"use strict";_.r(t);var a=_(1),r=Object(a.a)({},(function(){var v=this,t=v._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[v._v("#")]),v._v(" 概述")]),v._v(" "),t("p",[v._v("从"),t("code",[v._v("Chrome")]),v._v("浏览器的高层次架构（"),t("code",[v._v("high-level architecture)")]),v._v("到页面渲染流水线（"),t("code",[v._v("rendering pipeline")]),v._v("）的具体细节，这篇文章都有涉及")]),v._v(" "),t("p",[v._v("这篇文章的作用？👇")]),v._v(" "),t("ul",[t("li",[v._v("帮助你理解浏览器是怎么把我们写的代码变成一个网站的")]),v._v(" "),t("li",[v._v("浏览器的性能是怎么提高的")])]),v._v(" "),t("h2",{attrs:{id:"gpu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gpu"}},[v._v("#")]),v._v(" GPU")]),v._v(" "),t("p",[v._v("使用GPU —— using 和 GPU支持 —— backed")]),v._v(" "),t("p",[v._v("通常来说，你的应用要"),t("strong",[v._v("通过操作系统提供的一些机制")]),v._v("才能跑在CPU和GPU上面。")]),v._v(" "),t("h2",{attrs:{id:"进程和线程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进程和线程"}},[v._v("#")]),v._v(" 进程和线程")]),v._v(" "),t("p",[v._v("进程之间的通信 —— IPC机制")]),v._v(" "),t("p",[v._v("有时候为了满足功能的需要，创建的进程会叫系统创建另外一些进程去处理其它任务，不过新建的进程会拥有全新的独立的内存空间而不是和原来的进程共用内存空间。如果这些进程需要通信，它们要通过IPC机制（Inter Process Communication）来进行。")]),v._v(" "),t("p",[v._v("很多应用程序都会采取这种"),t("strong",[v._v("多进程")]),v._v("的方式来工作，因为进程和进程之间是"),t("strong",[v._v("互相独立，互不影响")]),v._v("的，换句话来说，如果其中一个工作进程（worker process）挂掉了其他进程不会受到影响，而且挂掉的进程还可以重启。")]),v._v(" "),t("h2",{attrs:{id:"浏览器架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器架构"}},[v._v("#")]),v._v(" 浏览器架构")]),v._v(" "),t("p",[v._v("单进程架构和多进程架构")]),v._v(" "),t("p",[v._v("Chrome采用的是多进程架构")]),v._v(" "),t("h2",{attrs:{id:"各个进程之间是如何工作的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#各个进程之间是如何工作的"}},[v._v("#")]),v._v(" 各个进程之间是如何工作的")]),v._v(" "),t("h2",{attrs:{id:"多进程架构的好处"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多进程架构的好处"}},[v._v("#")]),v._v(" 多进程架构的好处")]),v._v(" "),t("ol",[t("li",[v._v("更好的容错性，一个tap标签页挂了不影响其他tab运行")]),v._v(" "),t("li",[v._v("安全性和沙盒性 —— 因为操作系统可以提供方法让你限制每个进程拥有的能力，所以浏览器可以用沙箱来保护某些特定功能的进程（沙箱性）。例如，由于tab渲染进程可能会处理来自用户的随机输入，所以Chrome限制了它们对系统文件随机读写的能力。")])]),v._v(" "),t("h2",{attrs:{id:"节省内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#节省内存"}},[v._v("#")]),v._v(" 节省内存")]),v._v(" "),t("p",[v._v("Chrome浏览器的架构正在发生一些改变，目的是将和浏览器本身（Chrome）相关的部分"),t("strong",[v._v("拆分为一个个不同的服务")]),v._v("，服务化之后，这些功能既可以放在不同的进程里面运行也可以合并为一个单独的进程运行 —— "),t("strong",[v._v("服务化")]),v._v(" —— 把多个进程合并成一个进程来运行")]),v._v(" "),t("ul",[t("li",[v._v("当在性能好的硬件上执行时 —— 服务会放到不同进程中以提高稳定性")]),v._v(" "),t("li",[v._v("性能不好时 —— 服务就会放在一个进程中，减少内存的消耗")])]),v._v(" "),t("h2",{attrs:{id:"网站隔离-site-isolation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网站隔离-site-isolation"}},[v._v("#")]),v._v(" ⭐️ 网站隔离（Site Isolation）")]),v._v(" "),t("p",[v._v("一个"),t("code",[v._v("tab")]),v._v("（标签页）可能有来自多个网站的"),t("code",[v._v("iframe")]),v._v("，所以如果一个"),t("code",[v._v("tab")]),v._v("只有一个进程的话，那么这些来自不同网站的"),t("code",[v._v("iframe")]),v._v("就会存在一个进程中共享内存，这就有可能会破坏同源策略")]),v._v(" "),t("p",[t("strong",[v._v("同源策略是浏览器最核心的安全模型")]),v._v("，它可以禁止网站在未经同意的情况下去获取另外一个站点的数据，所以绕过同源策略是很多安全攻击的主要目的")]),v._v(" "),t("p",[v._v("而进程隔离（"),t("code",[v._v("process isolation")]),v._v("）是实现网站隔离最好最有效的办法了，在"),t("code",[v._v("Chrome 67")]),v._v("版本之后，桌面版的"),t("code",[v._v("Chrome")]),v._v("会"),t("strong",[v._v("默认开启网站隔离")]),v._v("功能，这样每一个跨站点的iframe都会拥有一个独立的渲染进程。")]),v._v(" "),t("p",[v._v("但网站隔离的强大远远不止于此，它汇聚了很多工程师好几年的研发努力，从根本上改变了各个"),t("code",[v._v("iframe")]),v._v("之间的通信方式，对于有"),t("code",[v._v("iframe")]),v._v("的网站，当用户打开右边的"),t("code",[v._v("devtool")]),v._v("时，"),t("code",[v._v("Chrome")]),v._v("浏览器其实要做很多工作才能让开发者感觉不出来有什么区别，这其实是很难实现的")]),v._v(" "),t("h2",{attrs:{id:"导航的时候发生了什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导航的时候发生了什么"}},[v._v("#")]),v._v(" 导航的时候发生了什么")]),v._v(" "),t("p",[v._v("我们现在就模拟一个场景，在浏览器中输入一个网址")]),v._v(" "),t("h3",{attrs:{id:"检查输入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#检查输入"}},[v._v("#")]),v._v(" 1️⃣ 检查输入")]),v._v(" "),t("h3",{attrs:{id:"开始导航"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始导航"}},[v._v("#")]),v._v(" 2️⃣ 开始导航")]),v._v(" "),t("h3",{attrs:{id:"读取响应"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#读取响应"}},[v._v("#")]),v._v(" 3️⃣ 读取响应")]),v._v(" "),t("h3",{attrs:{id:"找渲染进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#找渲染进程"}},[v._v("#")]),v._v(" 4️⃣ 找渲染进程")]),v._v(" "),t("h3",{attrs:{id:"提交导航"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提交导航"}},[v._v("#")]),v._v(" 5️⃣ 提交导航")])])}),[],!1,null,null,null);t.default=r.exports}}]);