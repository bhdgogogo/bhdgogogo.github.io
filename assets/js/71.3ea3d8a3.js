(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{499:function(t,v,e){"use strict";e.r(v);var _=e(1),s=Object(_.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("p",[v("code",[t._v("Vue")]),t._v("的生命周期是很重要的一个部分，理解这部分内容有利于我们更加了解"),v("code",[t._v("vue")]),t._v("的工作原理，这篇文章就来记录一下"),v("code",[t._v("vue")]),t._v("的生命周期（选项式"),v("code",[t._v("API")]),t._v("）")]),t._v(" "),v("blockquote",[v("p",[t._v("注意："),v("code",[t._v("vue2")]),t._v("和"),v("code",[t._v("vue3")]),t._v("的生命周期是有区别的，这里只给出了选项式"),v("code",[t._v("API")]),t._v("中最重要的 8 个生命周期钩子函数")])]),t._v(" "),v("p",[t._v("📝 "),v("strong",[v("code",[t._v("vue")]),t._v("官网对生命周期的描述")])]),t._v(" "),v("p",[t._v("每个 "),v("code",[t._v("Vue")]),t._v(" 实例在被创建时都要经过一系列的初始化过程——例如，需要设置数据监听、编译模板、将实例挂载到 "),v("code",[t._v("DOM")]),t._v(" 并在数据变化时更新 "),v("code",[t._v("DOM")]),t._v(" 等。同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会。")]),t._v(" "),v("p",[t._v("总结一下，就是在"),v("code",[t._v("vue")]),t._v("从创建实例到最终销毁的过程中，会经历不同的阶段，在每个阶段时会执行不同的函数，这些函数就叫做 —— 生命周期钩子函数")]),t._v(" "),v("h2",{attrs:{id:"beforecreate"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#beforecreate"}},[t._v("#")]),t._v(" beforeCreate")]),t._v(" "),v("p",[t._v("在我们创建一个"),v("code",[t._v("vue")]),t._v("实例之后，首先要执行的就是初始化的工作，那就要搞明白初始化了哪些东西")]),t._v(" "),v("p",[t._v("第一次初始化，实例有了事件，比如"),v("code",[t._v(".once, .trim")]),t._v("这些事件修饰符，有了生命周期函数")]),t._v(" "),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("会在实例初始化完成、"),v("code",[t._v("props")]),t._v(" 解析之后、"),v("code",[t._v("data()")]),t._v(" 和 "),v("code",[t._v("computed")]),t._v(" 等选项处理之前立即调用。")]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"title"}),v("p",[t._v("组合式"),v("code",[t._v("API")]),t._v("中的"),v("code",[t._v("setup()")]),t._v("钩子会在所有选项式"),v("code",[t._v("API")]),t._v("钩子之前调用，"),v("code",[t._v("beforeCreate()")]),t._v("也是这样")])]),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/bhdgogogo/cloud-img/img/blogImg/vue_3.jpg",alt:"图片1"}})]),t._v(" "),v("h2",{attrs:{id:"created"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#created"}},[t._v("#")]),t._v(" created")]),t._v(" "),v("p",[t._v("第二次初始化，此时在"),v("code",[t._v("vue")]),t._v("实例上可以看到"),v("code",[t._v("_data")]),t._v("，同时实例对象上可以看到对应的代理属性，计算属性，方法和侦听器")]),t._v(" "),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("在组件实例处理完所有与"),v("strong",[t._v("状态")]),t._v("相关的选项后调用。")]),t._v(" "),v("h2",{attrs:{id:"编译模板阶段"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#编译模板阶段"}},[t._v("#")]),t._v(" 编译模板阶段")]),t._v(" "),v("p",[t._v("在初始化之后，会检查有没有配置"),v("code",[t._v("el")]),t._v("，也就是"),v("code",[t._v("vue")]),t._v("实例应该挂载到哪个位置（要服务的容器），比如"),v("code",[t._v("el : root")]),t._v("，那就会去找"),v("code",[t._v("id")]),t._v("为"),v("code",[t._v("root")]),t._v("的元素，")]),t._v(" "),v("p",[t._v("此时需要判断有没有配置"),v("code",[t._v("el")])]),t._v(" "),v("ul",[v("li",[t._v("如果没有，就会进入等待，直到"),v("code",[t._v("vm.$mount")]),t._v("(要服务的容器)执行，如果不执行该语句，那就永远不会进行到后边的阶段")]),t._v(" "),v("li",[t._v("如果有，那就进行下一步检查")])]),t._v(" "),v("p",[t._v("直到要服务的容器找到后，开始检查是否配置了"),v("code",[t._v("template")])]),t._v(" "),v("ul",[v("li",[t._v("如果有，直接编译"),v("code",[t._v("template")]),t._v("中的内容作为模板（注意要写成单根组件），进行渲染")]),t._v(" "),v("li",[t._v("如果没有，就把"),v("code",[t._v("el")]),t._v("（要服务的容器）外部的"),v("code",[t._v("html")]),t._v("中的模板编译为模板 —— 也就是"),v("code",[t._v('div id = "root"')]),t._v("中的所有内容")])]),t._v(" "),v("p",[t._v("这个过程 vue 开始了编译模板的工作，生成虚拟"),v("code",[t._v("DOM")]),t._v("（内存中），所以页面中会显示"),v("code",[t._v("html")]),t._v("渲染后的结果，但不会显示"),v("strong",[t._v("解析好")]),t._v("的内容")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/bhdgogogo/cloud-img/img/blogImg/vue_4.jpg",alt:"图片2"}})]),t._v(" "),v("h2",{attrs:{id:"beforemount"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#beforemount"}},[t._v("#")]),t._v(" beforeMount")]),t._v(" "),v("p",[t._v("在编译完模板之后，马上要进行的是"),v("strong",[t._v("挂载")]),t._v("工作")]),t._v(" "),v("p",[t._v("在挂载之前，此时呈现的是未经过 Vue 编译的 DOM，你可以对 DOM 进行操作，但这些操作最终都不会有效果，（如果你停在这个钩子函数这里，可以看到效果，但是在整个过程中，你修改的 DOM 都会在转换成真实 DOM 后被替换，所以在这里操作 DOM 是没有意义的）")]),t._v(" "),v("p",[t._v("此时组件已经完成了其响应式状态的设置，但还没有创建 "),v("code",[t._v("DOM")]),t._v(" 节点，它即将首次执行 "),v("code",[t._v("DOM")]),t._v(" 渲染过程。")]),t._v(" "),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("在挂载开始之前被调用")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/bhdgogogo/cloud-img/img/blogImg/vue_5.jpg",alt:"图片3"}})]),t._v(" "),v("h2",{attrs:{id:"mounted"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#mounted"}},[t._v("#")]),t._v(" mounted")]),t._v(" "),v("p",[t._v("此时页面呈现的是经过"),v("code",[t._v("Vue")]),t._v("编译的"),v("code",[t._v("DOM")]),t._v("，此时可以操作"),v("code",[t._v("DOM")]),t._v("了（但是不建议），至此页面的整个初始化过程结束")]),t._v(" "),v("p",[t._v("所以一般会在这个钩子函数中开启定时器，发送网络请求，订阅消息，绑定自定义事件等初始化操作")]),t._v(" "),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("挂载之后调用，并且这时 "),v("code",[t._v("el")]),t._v(" 被新创建的 "),v("code",[t._v("vm.$el")]),t._v(" 替换了")]),t._v(" "),v("div",{staticClass:"custom-block warning"},[v("p",{staticClass:"title"}),v("p",[v("code",[t._v("mounted")]),t._v(" 不会保证所有的子组件也都被挂载完成。如果你希望等到整个视图都渲染完毕再执行某些操作，可以在 "),v("code",[t._v("mounted")]),t._v(" 内部使用 "),v("code",[t._v("vm.$nextTick")]),t._v("：")]),t._v(" "),v("div",{staticClass:"language-javascript extra-class"},[v("pre",{pre:!0,attrs:{class:"language-javascript"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mounted")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("$nextTick")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仅在整个视图都被渲染之后才会运行的代码")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),v("h2",{attrs:{id:"beforeupdate"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#beforeupdate"}},[t._v("#")]),t._v(" beforeUpdate")]),t._v(" "),v("p",[v("strong",[t._v("何处调用？")]),v("br"),t._v("\n在组件即将因为一个响应式状态变更而更新其 "),v("code",[t._v("DOM")]),t._v(" 树之前调用。")]),t._v(" "),v("p",[t._v("在这个钩子函数中适合在现有 "),v("code",[t._v("DOM")]),t._v(" 将要被更新之前访问它，比如移除手动添加的事件监听器。"),v("br"),t._v("\n也可以用来在 "),v("code",[t._v("Vue")]),t._v(" 更新 "),v("code",[t._v("DOM")]),t._v(" 之前访问 "),v("code",[t._v("DOM")]),t._v(" 状态。在这个钩子中更改状态也是安全的。")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/bhdgogogo/cloud-img/img/blogImg/vue_6.jpg",alt:"图片4"}})]),t._v(" "),v("h2",{attrs:{id:"updated"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#updated"}},[t._v("#")]),t._v(" updated")]),t._v(" "),v("p",[t._v("父组件的更新钩子将在其子组件的更新钩子之后调用。")]),t._v(" "),v("p",[t._v("这个钩子会在组件的任意 "),v("code",[t._v("DOM")]),t._v(" 更新后（随便哪个更新）被调用，这些更新可能是由不同的状态变更导致的。如果你需要在某个特定的状态更改后访问更新后的 "),v("code",[t._v("DOM")]),t._v("，请使用 "),v("code",[t._v("nextTick()")]),t._v(" 作为替代。")]),t._v(" "),v("div",{staticClass:"custom-block danger"},[v("p",{staticClass:"title"}),v("p",[t._v("不要在"),v("code",[t._v("updated")]),t._v("钩子中修改组件的状态，可能会导致无限循环")])]),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("在组件因为一个响应式状态变更而更新其 "),v("code",[t._v("DOM")]),t._v(" 树之后调用。")]),t._v(" "),v("div",{staticClass:"custom-block warning"},[v("p",{staticClass:"title"}),v("p",[v("code",[t._v("updated")]),t._v(" 也不会保证所有的子组件也都被重新渲染完毕。如果你希望等到整个视图都渲染完毕，可以在 "),v("code",[t._v("updated")]),t._v(" 里使用 "),v("code",[t._v("vm.$nextTick")])]),t._v(" "),v("div",{staticClass:"language-javascript extra-class"},[v("pre",{pre:!0,attrs:{class:"language-javascript"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mounted")]),v("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("$nextTick")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),v("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仅在整个视图都被渲染之后才会运行的代码")]),t._v("\n  "),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),v("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),v("h2",{attrs:{id:"beforedestroy"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#beforedestroy"}},[t._v("#")]),t._v(" beforeDestroy")]),t._v(" "),v("p",[t._v("在该钩子函数中，实例仍然完全可用，可以访问数据和方法，但所有对数据的修改就没用了，但是此时操作实例也是没有意义的，因为实例马上就要销毁了")]),t._v(" "),v("p",[t._v("在这个钩子函数中一般会执行关闭定时器，取消订阅消息，解绑自定义事件等收尾操作")]),t._v(" "),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("实例销毁之前调用")]),t._v(" "),v("p",[v("img",{attrs:{src:"https://raw.githubusercontent.com/bhdgogogo/cloud-img/img/blogImg/vue_7.jpg",alt:"图片5"}})]),t._v(" "),v("h2",{attrs:{id:"destroyed"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#destroyed"}},[t._v("#")]),t._v(" destroyed")]),t._v(" "),v("p",[t._v("该钩子被调用后，对应 Vue 实例的所有指令都被解绑，所有的事件监听器被移除，所有的子实例也都被销毁。")]),t._v(" "),v("p",[t._v("销毁后通过"),v("code",[t._v("Vue dev tool")]),t._v("看不到任何信息")]),t._v(" "),v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"title"}),v("p",[t._v("原生的"),v("code",[t._v("DOM")]),t._v("事件只要绑定了就去除不掉了，"),v("code",[t._v("vue")]),t._v("实例销毁了之后，原生的"),v("code",[t._v("DOM")]),t._v("事件仍然是可以调用的，比如"),v("code",[t._v("button")]),t._v("的"),v("code",[t._v("click")]),t._v("事件")])]),v("p",[v("strong",[t._v("何处调用？")])]),t._v(" "),v("p",[t._v("实例销毁后调用")]),t._v(" "),v("h2",{attrs:{id:"总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),v("p",[t._v("常用的生命周期钩子")]),t._v(" "),v("ol",[v("li",[v("code",[t._v("mounted")]),t._v(": 发送"),v("code",[t._v("ajax")]),t._v("请求、启动定时器、绑定自定义事件、订阅消息等【初始化操作】。")]),t._v(" "),v("li",[v("code",[t._v("beforeDestroy")]),t._v(": 清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】。")])])])}),[],!1,null,null,null);v.default=s.exports}}]);